"use strict";var n=require("fs"),e=require("path");function r(n){if(!n)return n;var e=n.lastIndexOf(".");return e>=0?n.substring(0,e):n}var t=/^\$\s*(.+?)\s*\$$/,i="_DEFAULT_GROUP_";function o(n){var e=[{name:i,docs:[]}],r={groups:e};if(!n)return r;for(var o=n.split(/[\n|\r\n]/g),u=e[0],a=function(n,r){var i=o[n].trim();if(!i)return"continue";var a,s,c="",f=(a=i,(s=t.exec(a))?s[1]:null),l=f;if(!f){var m=i.split("$");c=m[0],l=m[1]||f}l&&((u=e.find((function(n){return n.name===l})))||(u={name:l,docs:[]},e.push(u))),f||u.docs.push({name:c,order:u.docs.length})},s=0,c=o.length;s<c;s++)a(s);return r}var u=".ORDER";function a(n){return n&&n.isFile()&&/\.md$/gi.test(n.name)}function s(n){return n&&n.isDirectory()&&!/^[._]/gi.test(n.name)}function c(t){var c,f=n.readdirSync(t,{withFileTypes:!0}),l=f.filter((function(n){return a(n)})),m=f.findIndex((function(n){return n.isFile()&&n.name.toUpperCase()===u})),p=o(m<0?null:n.readFileSync(e.join(t,f[m].name),{encoding:"utf-8"})),d=l.reduce((function(n,e){var t=n[0],i=n[1];return t[r(e.name)]=e,i[e.name]=e,n}),[{},{}]),v=d[0],g=d[1],x={},h=p.groups.map((function(n){return{name:n.name===i?"":n.name,docs:n.docs.map((function(n){var e=v[n.name]||g[n.name];return x[e.name]=1,{name:n.name||"",file:e}})),dirs:f.filter((function(n){return s(n)}))}})),D=l.filter((function(n){return!x[n.name]})).map((function(n){return{name:r(n.name),file:n}}));return D.length&&(c=h[0].docs).push.apply(c,D),h}function f(n){return n.replace(/\\+/g,"/")}function l(n){return n?f(/^\//.test(n)?n:"/".concat(n)):n}var m={docs:e.resolve(process.cwd(),"docs")};exports.autoGenerateSidebar=function(){var n={},t=function(i,o){void 0===o&&(o="");var u=c(i);o&&(n[l(o)]=u.filter((function(n){return n.docs.length})).map((function(n){return{text:n.name,collapsible:!0,items:n.docs.map((function(n){return{text:r(n.file.name),link:l(e.join(o,n.file.name))}}))}}))),u.forEach((function(n){n.dirs.forEach((function(n){t(e.join(i,n.name),e.join(o,n.name))}))}))};return t(e.resolve(m.docs)),n},exports.getBasename=r,exports.getExtension=function(n){if(!n)return n;var e=n.lastIndexOf(".");return e>=0?n.substring(e+1):null},exports.getFirstDocLink=function(n){var r=c(e.join(m.docs,n)).reduce((function(n,e){return n.push.apply(n,e.docs.map((function(n){return n.file}))),n}),[]);if(!r.length)return null;var t=f(e.join(n,r[0].name));return/^\//.test(t)||(t="/"+t),t},exports.getLinkPath=l,exports.isDocFile=a,exports.isValidDir=s,exports.normalize=f,exports.readDocGroups=c;
